/**
 * ProjectUI - Â∞àÊ°àÁÆ°ÁêÜ‰ΩøÁî®ËÄÖ‰ªãÈù¢
 * Ë≤†Ë≤¨Â∞àÊ°àÁöÑÂïüÂãïÁï´Èù¢„ÄÅÊñ∞Â¢ûÂ∞çË©±Ê°Ü„ÄÅÂ∞àÊ°àÈÅ∏ÊìáÂô®Á≠â‰ªãÈù¢
 */
class ProjectUI {
    constructor(projectManager, saveLoadModule) {
        this.projectManager = projectManager;
        this.saveLoadModule = saveLoadModule;
        this.currentModal = null;
        this.init();
    }

    init() {
        this.createStyles();
        this.createStartupScreen();
    }

    /**
     * Âª∫Á´ãÊ®£Âºè
     */
    createStyles() {
        const style = document.createElement('style');
        style.textContent = `
            .project-modal {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                opacity: 0;
                transition: opacity 0.3s ease;
            }

            .project-modal.show {
                opacity: 1;
            }

            .project-modal-content {
                background: white;
                border-radius: 12px;
                padding: 32px;
                max-width: 600px;
                width: 90%;
                max-height: 80vh;
                overflow-y: auto;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                transform: translateY(20px);
                transition: transform 0.3s ease;
            }

            .project-modal.show .project-modal-content {
                transform: translateY(0);
            }

            .project-header {
                text-align: center;
                margin-bottom: 32px;
            }

            .project-title {
                font-size: 28px;
                font-weight: bold;
                color: #1f2937;
                margin-bottom: 8px;
            }

            .project-subtitle {
                font-size: 16px;
                color: #6b7280;
            }

            .project-buttons {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 16px;
                margin-bottom: 32px;
            }

            .project-btn {
                padding: 20px;
                border: 2px solid #e5e7eb;
                border-radius: 8px;
                background: white;
                cursor: pointer;
                transition: all 0.2s ease;
                text-align: center;
                font-size: 16px;
                font-weight: 500;
                color: #374151;
            }

            .project-btn:hover {
                border-color: #3b82f6;
                background: #f8fafc;
                transform: translateY(-1px);
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
            }

            .project-btn.primary {
                background: #3b82f6;
                border-color: #3b82f6;
                color: white;
            }

            .project-btn.primary:hover {
                background: #2563eb;
                border-color: #2563eb;
            }

            .project-btn-icon {
                font-size: 24px;
                margin-bottom: 8px;
                display: block;
            }

            .project-list {
                max-height: 300px;
                overflow-y: auto;
                border: 1px solid #e5e7eb;
                border-radius: 8px;
                margin-bottom: 20px;
            }

            .project-item {
                padding: 16px;
                border-bottom: 1px solid #f3f4f6;
                cursor: pointer;
                transition: background 0.2s ease;
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .project-item:hover {
                background: #f8fafc;
            }

            .project-item:last-child {
                border-bottom: none;
            }

            .project-thumbnail {
                width: 60px;
                height: 40px;
                background: #f3f4f6;
                border-radius: 4px;
                border: 1px solid #e5e7eb;
                object-fit: cover;
            }

            .project-info {
                flex: 1;
            }

            .project-name {
                font-weight: 600;
                color: #1f2937;
                margin-bottom: 4px;
            }

            .project-meta {
                font-size: 12px;
                color: #6b7280;
            }

            .project-actions {
                display: flex;
                gap: 8px;
            }

            .project-action-btn {
                padding: 6px 8px;
                border: 1px solid #e5e7eb;
                border-radius: 4px;
                background: white;
                cursor: pointer;
                font-size: 12px;
                transition: all 0.2s ease;
            }

            .project-action-btn:hover {
                background: #f3f4f6;
            }

            .project-action-btn.delete {
                color: #dc2626;
                border-color: #dc2626;
            }

            .project-action-btn.delete:hover {
                background: #fef2f2;
            }

            .project-form {
                margin-bottom: 24px;
            }

            .project-form-group {
                margin-bottom: 20px;
            }

            .project-label {
                display: block;
                font-weight: 600;
                color: #374151;
                margin-bottom: 8px;
            }

            .project-input {
                width: 100%;
                padding: 12px;
                border: 2px solid #e5e7eb;
                border-radius: 6px;
                font-size: 16px;
                transition: border-color 0.2s ease;
            }

            .project-input:focus {
                outline: none;
                border-color: #3b82f6;
            }

            .project-textarea {
                resize: vertical;
                min-height: 80px;
            }

            .project-form-buttons {
                display: flex;
                gap: 12px;
                justify-content: flex-end;
            }

            .project-cancel-btn {
                padding: 10px 20px;
                border: 2px solid #e5e7eb;
                border-radius: 6px;
                background: white;
                cursor: pointer;
                font-weight: 500;
                transition: all 0.2s ease;
            }

            .project-cancel-btn:hover {
                background: #f3f4f6;
            }

            .project-save-btn {
                padding: 10px 20px;
                border: 2px solid #3b82f6;
                border-radius: 6px;
                background: #3b82f6;
                color: white;
                cursor: pointer;
                font-weight: 500;
                transition: all 0.2s ease;
            }

            .project-save-btn:hover {
                background: #2563eb;
                border-color: #2563eb;
            }

            .project-save-btn:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }

            .project-toolbar-info {
                display: flex;
                align-items: center;
                gap: 8px;
                font-size: 14px;
                color: #6b7280;
            }

            .empty-state {
                text-align: center;
                padding: 40px 20px;
                color: #6b7280;
            }

            .empty-state-icon {
                font-size: 48px;
                margin-bottom: 16px;
                opacity: 0.5;
            }
        `;
        document.head.appendChild(style);
    }

    /**
     * Âª∫Á´ãÂïüÂãïÁï´Èù¢
     */
    createStartupScreen() {
        const modal = document.createElement('div');
        modal.className = 'project-modal';
        modal.innerHTML = `
            <div class="project-modal-content">
                <div class="project-header">
                    <h1 class="project-title">Web ÊïôÂ≠∏ÁôΩÊùø</h1>
                    <p class="project-subtitle">ÈÅ∏ÊìáÊàñÂª∫Á´ã‰∏ÄÂÄãÂ∞àÊ°à‰æÜÈñãÂßã‰ΩøÁî®</p>
                </div>
                
                <div class="project-buttons">
                    <button class="project-btn primary" onclick="projectUI.showNewProjectDialog()">
                        <span class="project-btn-icon">üÜï</span>
                        Êñ∞Â¢ûÂ∞àÊ°à
                    </button>
                    <button class="project-btn" onclick="projectUI.showProjectList()">
                        <span class="project-btn-icon">üìÅ</span>
                        ÈñãÂïüÂ∞àÊ°à
                    </button>
                    <button class="project-btn" onclick="projectUI.importProject()">
                        <span class="project-btn-icon">üìÇ</span>
                        ÂåØÂÖ•Â∞àÊ°à
                    </button>
                    <button class="project-btn" onclick="projectUI.createQuickProject()">
                        <span class="project-btn-icon">‚ö°</span>
                        Âø´ÈÄüÈñãÂßã
                    </button>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
        this.currentModal = modal;
        
        // Ê∑ªÂä†‰∫ã‰ª∂Áõ£ËÅΩÂô®
        modal.addEventListener('click', (e) => {
            // ÈªûÊìäËÉåÊôØ‰∏çÈóúÈñâÂïüÂãïÁï´Èù¢ÔºåÂõ†ÁÇ∫ÈÄôÊòØÂøÖË¶ÅÁöÑÈÅ∏Êìá
            // ‰ΩÜÂèØ‰ª•Ê∑ªÂä†‰∏Ä‰∫õË¶ñË¶∫ÂõûÈ•ã
        });
        
        // Èò≤Ê≠¢Â∞çË©±Ê°ÜÂÖßÂÆπÂçÄÂüüÈªûÊìä‰∫ã‰ª∂ÂÜíÊ≥°
        modal.querySelector('.project-modal-content').addEventListener('click', (e) => {
            e.stopPropagation();
        });
        
        // È°ØÁ§∫ÂãïÁï´
        setTimeout(() => modal.classList.add('show'), 100);
    }

    /**
     * È°ØÁ§∫Êñ∞Â¢ûÂ∞àÊ°àÂ∞çË©±Ê°Ü
     */
    showNewProjectDialog() {
        this.hideCurrentModal();
        
        setTimeout(() => {
            const modal = document.createElement('div');
            modal.className = 'project-modal';
            modal.innerHTML = `
                <div class="project-modal-content">
                    <div class="project-header">
                        <h1 class="project-title">Êñ∞Â¢ûÂ∞àÊ°à</h1>
                        <p class="project-subtitle">Âª∫Á´ã‰∏ÄÂÄãÊñ∞ÁöÑÊïôÂ≠∏ÁôΩÊùøÂ∞àÊ°à</p>
                    </div>
                    
                    <form class="project-form" onsubmit="projectUI.handleNewProject(event)">
                        <div class="project-form-group">
                            <label class="project-label" for="projectName">Â∞àÊ°àÂêçÁ®±</label>
                            <input 
                                type="text" 
                                id="projectName" 
                                class="project-input" 
                                placeholder="Ëº∏ÂÖ•Â∞àÊ°àÂêçÁ®±..."
                                required
                                maxlength="50"
                            >
                        </div>
                        
                        <div class="project-form-group">
                            <label class="project-label" for="projectDescription">Â∞àÊ°àÊèèËø∞</label>
                            <textarea 
                                id="projectDescription" 
                                class="project-input project-textarea" 
                                placeholder="Ëº∏ÂÖ•Â∞àÊ°àÊèèËø∞ÔºàÈÅ∏Â°´Ôºâ..."
                                maxlength="200"
                            ></textarea>
                        </div>
                        
                        <div class="project-form-buttons">
                            <button type="button" class="project-cancel-btn" onclick="projectUI.showStartupScreen()">
                                ÂèñÊ∂à
                            </button>
                            <button type="submit" class="project-save-btn">
                                Âª∫Á´ãÂ∞àÊ°à
                            </button>
                        </div>
                    </form>
                </div>
            `;
            
            document.body.appendChild(modal);
            this.currentModal = modal;
            
            // Ê∑ªÂä†‰∫ã‰ª∂Áõ£ËÅΩÂô®
            modal.addEventListener('click', (e) => {
                // ÈªûÊìäËÉåÊôØÈóúÈñâÂ∞çË©±Ê°Ü
                if (e.target === modal) {
                    this.showStartupScreen();
                }
            });
            
            // Èò≤Ê≠¢Â∞çË©±Ê°ÜÂÖßÂÆπÂçÄÂüüÈªûÊìä‰∫ã‰ª∂ÂÜíÊ≥°
            modal.querySelector('.project-modal-content').addEventListener('click', (e) => {
                e.stopPropagation();
            });
            
            setTimeout(() => {
                modal.classList.add('show');
                modal.querySelector('#projectName').focus();
            }, 100);
        }, 350); // Á≠âÂæÖÂâç‰∏ÄÂÄãÊ®°ÊÖãÊ°ÜÂÆåÂÖ®ÈóúÈñâ
    }

    /**
     * ËôïÁêÜÊñ∞Â¢ûÂ∞àÊ°à
     */
    handleNewProject(event) {
        event.preventDefault();
        
        const name = document.getElementById('projectName').value.trim();
        const description = document.getElementById('projectDescription').value.trim();
        
        if (!name) {
            alert('Ë´ãËº∏ÂÖ•Â∞àÊ°àÂêçÁ®±');
            return;
        }
        
        // Âª∫Á´ãÊñ∞Â∞àÊ°à
        const project = this.projectManager.createProject(name, description);
        if (project) {
            this.hideCurrentModal();
            this.startProject(project);
        }
    }

    /**
     * È°ØÁ§∫Â∞àÊ°àÂàóË°®
     */
    showProjectList() {
        // ÂÖàÈö±ËóèÁï∂ÂâçÊ®°ÊÖãÊ°ÜÔºåÁ≠âÂæÖÂãïÁï´ÂÆåÊàêÂæåÂÜçÈ°ØÁ§∫Êñ∞ÁöÑ
        this.hideCurrentModal();
        
        setTimeout(() => {
            const projects = this.projectManager.getProjectsList();
            console.log('ËºâÂÖ•Â∞àÊ°àÂàóË°®:', projects); // Ë™øË©¶Ë®äÊÅØ
            
            const modal = document.createElement('div');
            modal.className = 'project-modal';
            modal.innerHTML = `
                <div class="project-modal-content">
                    <div class="project-header">
                        <h1 class="project-title">ÈÅ∏ÊìáÂ∞àÊ°à</h1>
                        <p class="project-subtitle">ÂæûÁèæÊúâÂ∞àÊ°à‰∏≠ÈÅ∏Êìá‰∏ÄÂÄãÈñãÂïü</p>
                    </div>
                    
                    <div class="project-list">
                        ${projects.length > 0 ? 
                            projects.map(project => this.renderProjectItem(project)).join('') :
                            '<div class="empty-state"><div class="empty-state-icon">üìù</div><p>Â∞öÁÑ°‰ªª‰ΩïÂ∞àÊ°à<br>Ë´ãÂª∫Á´ãÊÇ®ÁöÑÁ¨¨‰∏ÄÂÄãÂ∞àÊ°à</p></div>'
                        }
                    </div>
                    
                    <div class="project-form-buttons">
                        <button type="button" class="project-cancel-btn" onclick="projectUI.showStartupScreen()">
                            ËøîÂõû
                        </button>
                        <button type="button" class="project-save-btn" onclick="projectUI.showNewProjectDialog()">
                            Êñ∞Â¢ûÂ∞àÊ°à
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            this.currentModal = modal;
            
            // Ê∑ªÂä†‰∫ã‰ª∂Áõ£ËÅΩÂô®
            modal.addEventListener('click', (e) => {
                // ÈªûÊìäËÉåÊôØÈóúÈñâÂ∞çË©±Ê°Ü
                if (e.target === modal) {
                    this.showStartupScreen();
                }
            });
            
            // Èò≤Ê≠¢Â∞çË©±Ê°ÜÂÖßÂÆπÂçÄÂüüÈªûÊìä‰∫ã‰ª∂ÂÜíÊ≥°
            modal.querySelector('.project-modal-content').addEventListener('click', (e) => {
                e.stopPropagation();
            });
            
            // È°ØÁ§∫ÂãïÁï´
            setTimeout(() => {
                modal.classList.add('show');
                console.log('Â∞àÊ°àÂàóË°®Â∞çË©±Ê°ÜÂ∑≤È°ØÁ§∫'); // Ë™øË©¶Ë®äÊÅØ
            }, 100);
        }, 350); // Á≠âÂæÖÂâç‰∏ÄÂÄãÊ®°ÊÖãÊ°ÜÂÆåÂÖ®ÈóúÈñâ
    }

    /**
     * Ê∏≤ÊüìÂ∞àÊ°àÈ†ÖÁõÆ
     */
    renderProjectItem(project) {
        const date = new Date(project.updatedAt).toLocaleDateString('zh-TW');
        const time = new Date(project.updatedAt).toLocaleTimeString('zh-TW', { 
            hour: '2-digit', 
            minute: '2-digit' 
        });
        
        return `
            <div class="project-item" onclick="projectUI.openProject('${project.id}')">
                ${project.thumbnail ? 
                    `<img src="${project.thumbnail}" class="project-thumbnail" alt="Â∞àÊ°àÁ∏ÆÂúñ">` :
                    '<div class="project-thumbnail"></div>'
                }
                <div class="project-info">
                    <div class="project-name">${this.escapeHtml(project.name)}</div>
                    <div class="project-meta">
                        ${project.description ? this.escapeHtml(project.description) + ' ‚Ä¢ ' : ''}
                        ${date} ${time}
                    </div>
                </div>
                <div class="project-actions">
                    <button class="project-action-btn" onclick="event.stopPropagation(); projectUI.exportProject('${project.id}')" title="ÂåØÂá∫">
                        üì§
                    </button>
                    <button class="project-action-btn delete" onclick="event.stopPropagation(); projectUI.deleteProject('${project.id}')" title="Âà™Èô§">
                        üóëÔ∏è
                    </button>
                </div>
            </div>
        `;
    }

    /**
     * ÈñãÂïüÂ∞àÊ°à
     */
    openProject(projectId) {
        const project = this.projectManager.loadProject(projectId);
        if (project) {
            this.hideCurrentModal();
            this.startProject(project);
        }
    }

    /**
     * Âà™Èô§Â∞àÊ°à
     */
    deleteProject(projectId) {
        const project = this.projectManager.projects.find(p => p.id === projectId);
        if (project && confirm(`Á¢∫ÂÆöË¶ÅÂà™Èô§Â∞àÊ°à„Äå${project.name}„ÄçÂóéÔºüÊ≠§Êìç‰ΩúÁÑ°Ê≥ïÂæ©Âéü„ÄÇ`)) {
            this.projectManager.deleteProject(projectId);
            this.showProjectList(); // ÈáçÊñ∞Êï¥ÁêÜÂàóË°®
        }
    }

    /**
     * ÂåØÂá∫Â∞àÊ°à
     */
    exportProject(projectId) {
        const project = this.projectManager.projects.find(p => p.id === projectId);
        if (project) {
            const projectData = this.projectManager.exportProject(projectId);
            if (projectData) {
                this.saveLoadModule.exportToFile(project.name, JSON.parse(projectData));
            }
        }
    }

    /**
     * ÂåØÂÖ•Â∞àÊ°à
     */
    importProject() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        
        input.onchange = async (e) => {
            const file = e.target.files[0];
            if (file) {
                try {
                    const projectData = await this.saveLoadModule.importFromFile(file);
                    if (this.projectManager.importProject(JSON.stringify(projectData))) {
                        alert('Â∞àÊ°àÂåØÂÖ•ÊàêÂäüÔºÅ');
                        this.showProjectList();
                    } else {
                        alert('Â∞àÊ°àÂåØÂÖ•Â§±ÊïóÔºåË´ãÊ™¢Êü•Ê™îÊ°àÊ†ºÂºè„ÄÇ');
                    }
                } catch (error) {
                    alert('Â∞àÊ°àÂåØÂÖ•Â§±ÊïóÔºö' + error.message);
                }
            }
        };
        
        input.click();
    }

    /**
     * Âø´ÈÄüÈñãÂßãÔºàÂª∫Á´ãËá®ÊôÇÂ∞àÊ°àÔºâ
     */
    createQuickProject() {
        const project = this.projectManager.createProject('Âø´ÈÄüÂ∞àÊ°à ' + new Date().toLocaleString('zh-TW'));
        this.hideCurrentModal();
        this.startProject(project);
    }

    /**
     * ÈñãÂßãÂ∞àÊ°à
     */
    startProject(project) {
        console.log('ÈñãÂßãÂ∞àÊ°à:', project);
        
        // ËºâÂÖ•Â∞àÊ°àË≥áÊñô
        if (project.data) {
            this.saveLoadModule.importAllData(project.data);
        }
        
        // È°ØÁ§∫Â∞àÊ°àË≥áË®äÂà∞Â∑•ÂÖ∑Âàó
        this.showProjectInfo(project);
        
        // ÂïüÂãïËá™ÂãïÂÑ≤Â≠ò
        this.projectManager.startAutoSave(() => {
            this.saveCurrentProject();
        });
        
        // Ëß∏ÁôºÂ∞àÊ°àÈñãÂßã‰∫ã‰ª∂ÔºàÂ¶ÇÊûúÊúâÈúÄË¶ÅÔºâ
        if (window.app && window.app.onProjectStarted) {
            window.app.onProjectStarted(project);
        }
    }

    /**
     * ÂÑ≤Â≠òÁï∂ÂâçÂ∞àÊ°à
     */
    saveCurrentProject() {
        const project = this.projectManager.getCurrentProject();
        if (project) {
            const projectData = this.saveLoadModule.exportAllData();
            const thumbnail = this.saveLoadModule.generateThumbnail();
            const success = this.projectManager.saveCurrentProject(projectData, thumbnail);
            
            // È°ØÁ§∫ÂÑ≤Â≠òÁµêÊûú toast
            if (success) {
                this.showToast('Â∞àÊ°àÂÑ≤Â≠òÊàêÂäüÔºÅ', 'success');
            } else {
                this.showToast('Â∞àÊ°àÂÑ≤Â≠òÂ§±ÊïóÔºåË´ãÈáçË©¶', 'error');
            }
        }
    }

    /**
     * È°ØÁ§∫Â∞àÊ°àË≥áË®ä
     */
    showProjectInfo(project) {
        // Ê™¢Êü•ÊòØÂê¶Â∑≤Á∂ìÊúâÂ∞àÊ°àË≥áË®äÂÖÉÁ¥†
        let projectInfo = document.getElementById('project-info');
        if (!projectInfo) {
            // Âª∫Á´ãÂ∞àÊ°àË≥áË®äÂÖÉÁ¥†
            projectInfo = document.createElement('div');
            projectInfo.id = 'project-info';
            projectInfo.className = 'project-toolbar-info';
            
            // ÊèíÂÖ•Âà∞Â∑•ÂÖ∑Âàó‰∏≠ÔºàÂÅáË®≠Â∑•ÂÖ∑ÂàóÂú® #toolbarÔºâ
            const toolbar = document.getElementById('toolbar');
            if (toolbar) {
                toolbar.appendChild(projectInfo);
            } else {
                // Â¶ÇÊûúÊ≤íÊúâÊâæÂà∞Â∑•ÂÖ∑ÂàóÔºåÂª∫Á´ã‰∏ÄÂÄãÁ∞°ÂñÆÁöÑÈ°ØÁ§∫ÂçÄÂüü
                projectInfo.style.cssText = `
                    position: fixed;
                    top: 10px;
                    right: 10px;
                    background: rgba(255, 255, 255, 0.9);
                    padding: 8px 12px;
                    border-radius: 6px;
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                    z-index: 1000;
                `;
                document.body.appendChild(projectInfo);
            }
        }
        
        projectInfo.innerHTML = `
            <span>üìù ${this.escapeHtml(project.name)}</span>
            <button onclick="projectUI.saveCurrentProject()" style="
                margin-left: 8px;
                padding: 4px 8px;
                border: 1px solid #e5e7eb;
                border-radius: 4px;
                background: white;
                cursor: pointer;
                font-size: 12px;
            ">üíæ ÂÑ≤Â≠ò</button>
            <button onclick="projectUI.showStartupScreen()" style="
                margin-left: 4px;
                padding: 4px 8px;
                border: 1px solid #e5e7eb;
                border-radius: 4px;
                background: white;
                cursor: pointer;
                font-size: 12px;
            ">üìÅ Â∞àÊ°à</button>
        `;
    }

    /**
     * Èö±ËóèÁï∂ÂâçÊ®°ÊÖãÊ°Ü
     */
    hideCurrentModal() {
        if (this.currentModal) {
            const modalToRemove = this.currentModal;
            this.currentModal = null; // Á´ãÂç≥Ê∏ÖÁ©∫ÂºïÁî®ÔºåÈÅøÂÖçÁ´∂ÊÖãÊ¢ù‰ª∂
            
            modalToRemove.classList.remove('show');
            setTimeout(() => {
                if (modalToRemove.parentNode) {
                    modalToRemove.parentNode.removeChild(modalToRemove);
                }
            }, 300);
        }
    }

    /**
     * HTML ËΩâÁæ©
     */
    escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    /**
     * È°ØÁ§∫ÂïüÂãïÁï´Èù¢ÔºàÂÖ¨ÈñãÊñπÊ≥ïÔºâ
     */
    showStartupScreen() {
        this.hideCurrentModal();
        this.createStartupScreen();
    }

    /**
     * È°ØÁ§∫ Toast ÈÄöÁü•
     * @param {string} message - ÈÄöÁü•Ë®äÊÅØ
     * @param {string} type - ÈÄöÁü•È°ûÂûã ('success', 'error', 'warning', 'info')
     */
    showToast(message, type = 'info') {
        // ÁßªÈô§ÁèæÊúâÁöÑ toast
        const existingToast = document.getElementById('project-toast');
        if (existingToast) {
            existingToast.remove();
        }

        // Âª∫Á´ã toast ÂÖÉÁ¥†
        const toast = document.createElement('div');
        toast.id = 'project-toast';
        toast.className = `project-toast ${type}`;
        
        // Ê†πÊìöÈ°ûÂûãË®≠ÂÆöÈ°èËâ≤
        const colors = {
            success: '#10b981', // Á∂†Ëâ≤
            error: '#ef4444',   // Á¥ÖËâ≤
            warning: '#f59e0b', // Ê©ôËâ≤
            info: '#3b82f6'     // ËóçËâ≤
        };
        
        const bgColors = {
            success: '#f0fdf4', // Ê∑∫Á∂†Ëâ≤
            error: '#fef2f2',   // Ê∑∫Á¥ÖËâ≤
            warning: '#fffbeb', // Ê∑∫Ê©ôËâ≤
            info: '#eff6ff'     // Ê∑∫ËóçËâ≤
        };

        toast.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${bgColors[type] || bgColors.info};
            color: ${colors[type] || colors.info};
            border: 1px solid ${colors[type] || colors.info};
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 10001;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s ease;
            max-width: 300px;
            word-wrap: break-word;
        `;

        toast.textContent = message;
        document.body.appendChild(toast);

        // È°ØÁ§∫ÂãïÁï´
        setTimeout(() => {
            toast.style.opacity = '1';
            toast.style.transform = 'translateX(0)';
        }, 100);

        // 3ÁßíÂæåËá™ÂãïÈö±Ëóè
        setTimeout(() => {
            toast.style.opacity = '0';
            toast.style.transform = 'translateX(100%)';
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 300);
        }, 3000);
    }
}

// ÂåØÂá∫Ê®°ÁµÑ
window.ProjectUI = ProjectUI; 