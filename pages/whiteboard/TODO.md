## Web 教學白板 MVP - 待辦事項

此列表為建議的開發步驟，您可以依照實際情況調整順序。

### 專案目標
建立一個 Web 版的教學白板 MVP，參考 classroomscreen.com 的功能，使用 HTML、JavaScript 和 TailwindCSS 實現，具備 RWD 響應式設計，畫布填滿螢幕 100%。

### 開發階段

#### ✅ 階段一：基礎建設與畫布核心 (已完成)
- [x] 建立專案資料夾結構
- [x] 建立 index.html 基本架構
- [x] 引入 TailwindCSS CDN
- [x] 建立 CanvasModule.js 核心模組
- [x] 實現畫布 RWD 響應式調整
- [x] 建立基本的 CSS 樣式

#### ✅ 階段二：基本繪圖功能 (已完成)
- [x] 實現畫筆工具
- [x] 實現橡皮擦工具
- [x] 加入顏色選擇器
- [x] 加入線條粗細調整
- [x] 實現清空畫布功能
- [x] 加入繪圖歷史記錄機制
- [x] 支援滑鼠和觸控操作

#### ✅ 階段三：背景管理 (已完成)
- [x] 建立 BackgroundModule.js
- [x] 實現多種背景選項（白色、淺灰、格線）
- [x] 實現自訂背景顏色功能
- [x] 整合背景與前景的重繪機制
- [x] 修正文字工具的重繪問題

#### ✅ 階段四：進階功能與模組化重構 (已完成)

### 4.1 文字工具 ✅
- [x] 文字工具激活/停用機制
- [x] 點擊畫布新增文字框
- [x] 文字輸入和確認機制
- [x] 文字保存到繪圖歷史
- [x] 文字重繪機制

### 4.2 便條紙功能 ✅
- [x] 便條紙新增和編輯
- [x] 便條紙拖拽移動功能
- [x] 便條紙刪除機制
- [x] 便條紙樣式自訂
- [x] 便條紙重繪和保存
- [x] 統一3按鈕控制邏輯

### 4.3 QR Code 產生器 ✅
- [x] QR code 產生器面板 UI
- [x] 文字輸入和即時預覽
- [x] QR code 大小調整
- [x] 點擊畫布放置 QR code
- [x] 真實 QR code API 整合
- [x] 錯誤處理和備用方案
- [x] QR code 內容保留和重繪
- [x] 統一3按鈕控制邏輯

### 4.4 音量偵測功能 ✅
- [x] 麥克風權限請求和控制
- [x] 即時音量分析和視覺化
- [x] 音量條動態顯示（綠/黃/紅）
- [x] 閾值滑桿調節
- [x] 閾值指示線顯示
- [x] 音量超標警告系統
- [x] 警告計數器和鈴鐺動畫
- [x] Toast 通知系統
- [x] 音量平滑處理
- [x] 冷卻時間防止重複警告

### 4.5 YouTube 嵌入功能 ✅
- [x] YouTube 工具按鈕和啟動機制
- [x] YouTube URL 解析和驗證
- [x] 影片 iframe 嵌入和顯示
- [x] 影片拖曳移動功能
- [x] 影片縮放調整功能
- [x] 影片刪除功能（按鈕和快捷鍵）
- [x] 影片選中狀態和視覺回饋
- [x] 控制項顯示/隱藏機制
- [x] 多種 YouTube URL 格式支援
- [x] 影片資料儲存和載入機制
- [x] 與其他工具的整合和切換
- [x] 統一3按鈕控制邏輯

### 4.6 圖片插入功能 ✅
- [x] 圖片工具按鈕和啟動機制
- [x] 圖片檔案選擇和上傳
- [x] 圖片顯示和預覽
- [x] 圖片拖曳移動功能
- [x] 圖片縮放調整功能
- [x] 圖片刪除功能
- [x] 圖片選中狀態管理
- [x] 支援多種圖片格式（JPG、PNG、GIF、WebP）
- [x] 圖片資料保存和重繪機制
- [x] 統一3按鈕控制邏輯

### 4.7 計時器功能 ✅
- [x] 倒數計時器工具 (CountdownModule)
  - [x] DOM 元素倒數計時器
  - [x] 可拖曳、縮放、刪除
  - [x] 分鐘/秒數調整按鈕
  - [x] 預設 10:00 分鐘
  - [x] 計時結束聲音警報
  - [x] Toast 通知顯示
  - [x] 視覺提醒效果（閃爍、變色）
  - [x] 統一3按鈕控制邏輯
- [x] 碼錶工具 (StopwatchModule)
  - [x] DOM 元素碼錶顯示
  - [x] 可拖曳、縮放、刪除
  - [x] 百分秒精度（10ms 更新）
  - [x] 播放/暫停/重置控制
  - [x] 橫向佈局設計
  - [x] 統一3按鈕控制邏輯
- [x] 移除舊版 TimerModule，分離成兩個獨立工具

### 4.8 統一控制邏輯系統 ✅ (新增完成)
- [x] 建立 BaseControlModule 基礎類別
- [x] 實現統一的3按鈕控制系統
  - [x] 移動按鈕（綠色手掌圖示，左上角）
  - [x] 刪除按鈕（紅色垃圾桶圖示，右上角）
  - [x] 縮放按鈕（藍色箭頭圖示，右下角）
- [x] 統一的顯示/隱藏邏輯
- [x] 重構所有內容模組繼承 BaseControlModule
  - [x] NotesModule 重構完成
  - [x] YouTubeModule 重構完成
  - [x] ImageModule 重構完成
  - [x] CountdownModule 重構完成
  - [x] StopwatchModule 重構完成
- [x] 實現點擊內容顯示控制項邏輯
- [x] 統一的拖拽、縮放、刪除操作體驗
- [x] 工具切換時自動隱藏控制項
- [x] 保持向後兼容的 API 介面

### 4.9 超連結工具 ✅ (新增完成)
- [x] 建立 LinkModule.js 模組
- [x] 超連結 URL 輸入對話框
- [x] 自動偵測網站標題功能
- [x] 美觀的連結卡片設計
- [x] 新分頁開啟連結功能
- [x] 繼承 BaseControlModule 統一控制
- [x] 整合到系統（HTML、app.js、SaveLoadModule）
- [x] 修正內容生成位置問題
- [x] exportData/importData 方法實作

### 4.10 控制項顯示隱藏邏輯優化 ✅ (問題修正完成)
- [x] 修正多個元素控制按鈕同時顯示的問題
- [x] 確保點擊任何元素只顯示該元素的控制按鈕
- [x] 點擊空白處隱藏所有控制按鈕
- [x] 修正模組初始化順序問題
- [x] 統一各模組的 select 方法邏輯
- [x] 建立完整的工具開發流程文檔

#### ✅ 階段五：專案管理系統 (已完成)

### 5.1 專案管理核心架構 ✅
- [x] 建立 ProjectManager 模組
- [x] 設計 localStorage 資料結構
- [x] 實現專案 CRUD 操作
- [x] 建立專案列表管理機制
- [x] 實現當前專案狀態追蹤

### 5.2 儲存載入系統 ✅
- [x] 建立 SaveLoadModule 模組
- [x] 各模組新增 exportData() 方法
- [x] 各模組新增 importData() 方法
- [x] 實現畫布縮圖生成功能
- [x] 資料壓縮和優化機制

### 5.3 專案介面設計 ✅
- [x] 專案啟動畫面設計
- [x] 新增專案對話框
- [x] 專案選擇器介面
- [x] 工具列專案資訊顯示
- [x] 儲存/載入按鈕整合

### 5.4 專案管理流程 ✅
- [x] 新增專案流程
- [x] 儲存專案流程
- [x] 載入專案流程
- [x] 專案刪除和重新命名
- [x] 自動儲存機制

#### 📋 階段六：優化與擴展 (計畫中)

### 6.1 效能優化
- [ ] 畫布分層渲染
- [ ] 繪圖資料壓縮
- [ ] 記憶體使用優化
- [ ] 觸控事件優化
- [ ] 專案載入效能優化

### 6.2 使用者體驗改進
- [ ] 快捷鍵支援 (Ctrl+S 儲存、Ctrl+O 開啟)
- [ ] 工具提示系統
- [ ] 主題切換功能
- [ ] 工具列響應式佈局優化
- [ ] 拖放匯入專案檔案

### 6.3 功能擴展
- [ ] 撤銷/重做功能
- [ ] 圖形工具（直線、矩形、圓形）
- [ ] 檔案匯出功能（PNG、JPG、PDF）
- [ ] 多頁面支援
- [ ] 專案範本系統

### 6.4 協作功能（未來）
- [ ] 即時協作編輯
- [ ] 版本控制系統
- [ ] 雲端儲存整合
- [ ] 分享連結功能

### 技術架構
- **前端框架**: 純 JavaScript (ES6+)
- **樣式框架**: TailwindCSS
- **模組化設計**: 
  - CanvasModule (核心畫布)
  - BackgroundModule (背景管理)
  - BaseControlModule (統一控制邏輯) ⭐
  - TextToolModule (文字工具)
  - NotesModule (便條紙)
  - QRCodeModule (QR code 產生器)
  - YouTubeModule (YouTube 影片嵌入)
  - ImageModule (圖片插入)
  - CountdownModule (倒數計時器)
  - StopwatchModule (碼錶)
  - VolumeDetectionModule (音量偵測)
  - **ProjectManager (專案管理) - 開發中**
  - **SaveLoadModule (儲存載入) - 開發中**
  - **ProjectUI (專案介面) - 開發中**
- **響應式設計**: 支援桌面和行動裝置
- **資料結構**: drawingHistory 陣列儲存所有繪圖資料
- **專案儲存**: localStorage 儲存專案資料
- **統一控制**: BaseControlModule 提供一致的使用者體驗

### 專案狀態
🎉 **MVP+ 核心功能完成！** 所有基礎教學白板功能已實現，包含畫筆繪圖、背景管理、文字工具、便條紙、QR code 產生器、計時器功能、YouTube 嵌入和圖片插入。

✨ **統一控制體驗完成！** 所有可放置內容現在都具備一致的3按鈕控制體驗，提供直觀的移動、刪除、縮放操作。

🔄 **專案管理系統計畫中** - 準備設計和實現專案的新增、儲存、載入功能，讓使用者能夠管理多個教學白板專案。

---

## 目前狀態總結

✅ **已完成**: 
- 完整的教學白板 MVP 功能
- 所有互動內容的統一控制體驗
- 響應式設計和跨設備支援
- 豐富的教學工具集合

✅ **最新完成**: 
- 專案管理系統完整實現

📋 **計畫中**: 
- 儲存載入功能實現
- 使用者體驗優化
- 效能優化與功能擴展 