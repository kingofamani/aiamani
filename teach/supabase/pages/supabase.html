<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase PostgreSQL è³‡æ–™åº«éƒ¨ç½² | Supabase + Heroku æ•™å­¸</title>
    <meta name="description" content="å®Œæ•´çš„ Supabase PostgreSQL è³‡æ–™åº«éƒ¨ç½²æ•™å­¸ï¼Œå¾è¨»å†Šå¸³è™Ÿåˆ°è³‡æ–™é·ç§»çš„è©³ç´°æ­¥é©Ÿ">
    <link rel="stylesheet" href="../assets/css/style.css">
    <!-- å­—é«”åœ–æ¨™ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- å°èˆªæ¬„ -->
    <nav class="navbar">
        <div class="container navbar-container">
            <a href="../index.html" class="navbar-logo">SUPABASE + HEROKU</a>
            <button class="menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <ul class="navbar-menu">
                <li class="navbar-item"><a href="../index.html" class="navbar-link">é¦–é </a></li>
                <li class="navbar-item"><a href="supabase.html" class="navbar-link">Supabase</a></li>
                <li class="navbar-item"><a href="heroku.html" class="navbar-link">Heroku</a></li>
                <li class="navbar-item"><a href="advanced.html" class="navbar-link">é€²éšåŠŸèƒ½</a></li>
                <li class="navbar-item"><a href="checklist.html" class="navbar-link">éƒ¨ç½²æª¢æŸ¥</a></li>
                <li class="navbar-item"><a href="faq.html" class="navbar-link">å¸¸è¦‹å•é¡Œ</a></li>
            </ul>
        </div>
    </nav>

    <!-- é é¢æ¨™é¡Œ -->
    <section class="section" style="padding-top: 120px;">
        <div class="container">
            <h1>Supabase PostgreSQL è³‡æ–™åº«éƒ¨ç½²</h1>
            
            <!-- é€²åº¦æŒ‡ç¤ºå™¨ -->
            <div class="progress-bar">
                <div class="progress-step active" data-step="1">1</div>
                <div class="progress-step" data-step="2">2</div>
                <div class="progress-step" data-step="3">3</div>
                <div class="progress-step" data-step="4">4</div>
                <div class="progress-step" data-step="5">5</div>
            </div>
        </div>
    </section>

    <!-- ä¸»è¦å…§å®¹ -->
    <section class="section">
        <div class="container">
            <div class="grid">
                <!-- å´é‚Šæ¬„ -->
                <div class="col-4">
                    <div style="position: sticky; top: 100px;">
                        <h3>ç›®éŒ„</h3>
                        <ul style="list-style: none; padding: 0;">
                            <li style="margin-bottom: var(--spacing-xs);"><a href="#preparation">å‰ç½®æº–å‚™</a></li>
                            <li style="margin-bottom: var(--spacing-xs);"><a href="#create-project">å»ºç«‹ Supabase å°ˆæ¡ˆ</a></li>
                            <li style="margin-bottom: var(--spacing-xs);"><a href="#connection-info">å–å¾—è³‡æ–™åº«é€£ç·šè³‡è¨Š</a></li>
                            <li style="margin-bottom: var(--spacing-xs);"><a href="#local-setup">è¨­å®šæœ¬åœ°ç’°å¢ƒ</a></li>
                            <li style="margin-bottom: var(--spacing-xs);"><a href="#database-structure">å»ºç«‹è³‡æ–™åº«çµæ§‹</a></li>
                            <li style="margin-bottom: var(--spacing-xs);"><a href="#data-migration">è³‡æ–™é·ç§»</a></li>
                            <li style="margin-bottom: var(--spacing-xs);"><a href="#supabase-cli">ä½¿ç”¨ Supabase CLI</a></li>
                            <li style="margin-bottom: var(--spacing-xs);"><a href="#test-connection">æ¸¬è©¦é€£ç·š</a></li>
                        </ul>
                        
                        <div class="alert alert-info" style="margin-top: var(--spacing-l);">
                            <h4>é‡è¦æç¤º</h4>
                            <p>ä½¿ç”¨ Supabase æ™‚ï¼Œå‹™å¿…é¸æ“‡ Connection pooling é€£ç·šæ–¹å¼ï¼Œè€Œéç›´æ¥é€£æ¥ã€‚é€™èƒ½æä¾›æ›´å¥½çš„ç©©å®šæ€§èˆ‡æ•ˆèƒ½ã€‚</p>
                        </div>
                    </div>
                </div>
                
                <!-- ä¸»è¦å…§å®¹ -->
                <div class="col-8">
                    <!-- å‰ç½®æº–å‚™ -->
                    <div id="preparation" class="step-content" style="display: block;">
                        <h2>å‰ç½®æº–å‚™</h2>
                        
                        <div class="step">
                            <h3>è¨»å†Š Supabase å¸³è™Ÿ</h3>
                            <p>å‰å¾€ <a href="https://supabase.com" target="_blank">supabase.com</a> è¨»å†Šå…è²»å¸³è™Ÿã€‚æ‚¨å¯ä»¥ä½¿ç”¨ GitHubã€Google æˆ– Email è¨»å†Šã€‚</p>
                            <p>å…è²»æ–¹æ¡ˆåŒ…å«ï¼š</p>
                            <ul>
                                <li>500MB è³‡æ–™åº«ç©ºé–“</li>
                                <li>50MB æª”æ¡ˆå„²å­˜</li>
                                <li>50,000 æœˆæ´»èºä½¿ç”¨è€…</li>
                            </ul>
                        </div>
                        
                        <div class="step">
                            <h3>å®‰è£ Supabase CLI (å¯é¸ï¼Œä½†æ¨è–¦)</h3>
                            <p>Supabase CLI å¯ä»¥å¹«åŠ©æ‚¨åœ¨æœ¬åœ°é–‹ç™¼å’Œç®¡ç† Supabase å°ˆæ¡ˆã€‚</p>
                            
                            <h4>Windows (PowerShell)</h4>
                            <div class="code-block">
                                <pre><code># å®‰è£ Scoop (å¦‚æœæ²’æœ‰çš„è©±)
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
irm get.scoop.sh | iex

# å®‰è£ Supabase CLI
scoop install supabase</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                            
                            <h4>macOS</h4>
                            <div class="code-block">
                                <pre><code>brew install supabase/tap/supabase</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                            
                            <h4>Linux</h4>
                            <div class="code-block">
                                <pre><code>npm install -g supabase</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                        </div>
                        
                        <div class="step-navigation">
                            <button class="btn btn-secondary prev-step" disabled>ä¸Šä¸€æ­¥</button>
                            <button class="btn btn-primary next-step">ä¸‹ä¸€æ­¥</button>
                        </div>
                    </div>
                    
                    <!-- å»ºç«‹ Supabase å°ˆæ¡ˆ -->
                    <div id="create-project" class="step-content" style="display: none;">
                        <h2>å»ºç«‹ Supabase å°ˆæ¡ˆ</h2>
                        
                        <div class="step">
                            <h3>å»ºç«‹æ–°å°ˆæ¡ˆ</h3>
                            <p>ç™»å…¥ <a href="https://app.supabase.com" target="_blank">Supabase Dashboard</a>ï¼Œé»æ“Šã€ŒNew projectã€æŒ‰éˆ•ã€‚</p>
                            <p>å¦‚æœæ‚¨æ˜¯é¦–æ¬¡ä½¿ç”¨ï¼Œç³»çµ±æœƒè‡ªå‹•ç‚ºæ‚¨å»ºç«‹ä¸€å€‹é è¨­çµ„ç¹”ã€‚</p>
                        </div>
                        
                        <div class="step">
                            <h3>è¨­å®šå°ˆæ¡ˆè³‡è¨Š</h3>
                            <ul>
                                <li><strong>Name</strong>: è¼¸å…¥æ‚¨å–œæ­¡çš„å°ˆæ¡ˆåç¨±ï¼Œä¾‹å¦‚ <code>my-app</code></li>
                                <li><strong>Database Password</strong>: è¨­å®šä¸€å€‹å¼·å¯†ç¢¼ï¼ˆ<strong>è«‹è¨˜ä½ï¼Œç¨å¾Œéœ€è¦ä½¿ç”¨</strong>ï¼‰</li>
                                <li><strong>Region</strong>: é¸æ“‡æœ€æ¥è¿‘æ‚¨ç”¨æˆ¶çš„å€åŸŸï¼ˆå¦‚ Southeast Asia (Singapore)ï¼‰</li>
                                <li><strong>Pricing Plan</strong>: é¸æ“‡ã€ŒFreeã€</li>
                            </ul>
                        </div>
                        
                        <div class="step">
                            <h3>ç­‰å¾…å°ˆæ¡ˆå»ºç«‹</h3>
                            <p>é€šå¸¸éœ€è¦ 1-2 åˆ†é˜å®Œæˆå°ˆæ¡ˆå»ºç«‹ã€‚å»ºç«‹å®Œæˆå¾Œï¼Œæ‚¨å°‡çœ‹åˆ°å°ˆæ¡ˆçš„ Dashboardã€‚</p>
                        </div>
                        
                        <div class="alert alert-warning">
                            <h4>æ³¨æ„äº‹é …</h4>
                            <p>è«‹å‹™å¿…å¦¥å–„ä¿å­˜æ‚¨çš„è³‡æ–™åº«å¯†ç¢¼ï¼Œé€™å°‡ç”¨æ–¼å¾ŒçºŒçš„è³‡æ–™åº«é€£æ¥ã€‚å¦‚æœå¿˜è¨˜å¯†ç¢¼ï¼Œå¯ä»¥åœ¨å°ˆæ¡ˆè¨­å®šä¸­é‡è¨­ï¼Œä½†é€™æœƒå°è‡´ç¾æœ‰é€£æ¥å¤±æ•ˆã€‚</p>
                        </div>
                        
                        <div class="step-navigation">
                            <button class="btn btn-secondary prev-step">ä¸Šä¸€æ­¥</button>
                            <button class="btn btn-primary next-step">ä¸‹ä¸€æ­¥</button>
                        </div>
                    </div>
                    
                    <!-- å–å¾—è³‡æ–™åº«é€£ç·šè³‡è¨Š -->
                    <div id="connection-info" class="step-content" style="display: none;">
                        <h2>å–å¾—è³‡æ–™åº«é€£ç·šè³‡è¨Š (é‡è¦æ­¥é©Ÿ)</h2>
                        
                        <div class="step">
                            <h3>é€²å…¥å°ˆæ¡ˆè¨­å®š</h3>
                            <p>åœ¨ Supabase Dashboard ä¸­ï¼Œé»æ“Šå·¦å´é¸å–®çš„ã€ŒSettingsã€ï¼Œç„¶å¾Œé¸æ“‡ã€ŒDatabaseã€ã€‚</p>
                        </div>
                        
                        <div class="step">
                            <h3>é¸æ“‡æ­£ç¢ºçš„é€£ç·šæ–¹å¼</h3>
                            <p>åœ¨ã€ŒConnection stringã€å€æ®µï¼Œæ‚¨æœƒçœ‹åˆ°å…©å€‹é¸é …ï¼š</p>
                            <ol>
                                <li>âŒ <strong>ã€ŒDirect connectionã€</strong> - ç›´æ¥é€£æ¥</li>
                                <li>âœ… <strong>ã€ŒConnection poolingã€</strong> - é€£æ¥æ±  â­</li>
                            </ol>
                            <p class="alert alert-info" style="font-weight: bold;">ğŸ“¢ è«‹å‹™å¿…é¸æ“‡ç¬¬äºŒé … â­ã€ŒConnection poolingã€ï¼</p>
                        </div>
                        
                        <div class="step">
                            <h3>ç‚ºä»€éº¼å¿…é ˆä½¿ç”¨ Connection Poolingï¼Ÿ</h3>
                            <ul>
                                <li>âœ… <strong>ç©©å®šæ€§æ›´å¥½</strong>ï¼šé¿å…é€£æ¥æ•¸è¶…é™å•é¡Œ</li>
                                <li>âœ… <strong>æ•ˆèƒ½æ›´ä½³</strong>ï¼šé€£æ¥æ± ç®¡ç†ï¼Œæ¸›å°‘é€£æ¥å»ºç«‹é–‹éŠ·</li>
                                <li>âœ… <strong>é©åˆç”Ÿç”¢ç’°å¢ƒ</strong>ï¼šSupabase æ¨è–¦çš„æœ€ä½³å¯¦å‹™</li>
                                <li>âŒ <strong>Direct connection å•é¡Œ</strong>ï¼šå®¹æ˜“é‡åˆ° DNS è§£æå¤±æ•—ã€é€£æ¥è¶…æ™‚ç­‰å•é¡Œ</li>
                            </ul>
                        </div>
                        
                        <div class="step">
                            <h3>è¤‡è£½ Connection pooling é€£ç·šå­—ä¸²</h3>
                            <p>é¸æ“‡ã€ŒTransaction poolerã€æ¨¡å¼ï¼Œè¤‡è£½é¡ä¼¼ä»¥ä¸‹æ ¼å¼çš„ URIï¼š</p>
                            <div class="code-block">
                                <pre><code>postgresql://postgres.xxxxxxxxxxxx:password@aws-0-ap-southeast-1.pooler.supabase.com:5432/postgres</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                            
                            <h4>é€£ç·šå­—ä¸²æ ¼å¼èªªæ˜</h4>
                            <ul>
                                <li><strong>Host</strong>: <code>aws-0-ap-southeast-1.pooler.supabase.com</code> (æ³¨æ„æœ‰ <code>.pooler</code>)</li>
                                <li><strong>Port</strong>: <code>5432</code> (Transaction pooler) æˆ– <code>6543</code> (Session pooler)</li>
                                <li><strong>Database</strong>: <code>postgres</code></li>
                                <li><strong>Username</strong>: <code>postgres.xxxxxxxxxxxx</code> (æ³¨æ„å‰ç¶´æ ¼å¼)</li>
                                <li><strong>Password</strong>: æ‚¨åœ¨å»ºç«‹å°ˆæ¡ˆæ™‚è¨­å®šçš„å¯†ç¢¼</li>
                            </ul>
                        </div>
                        
                        <div class="step-navigation">
                            <button class="btn btn-secondary prev-step">ä¸Šä¸€æ­¥</button>
                            <button class="btn btn-primary next-step">ä¸‹ä¸€æ­¥</button>
                        </div>
                    </div>
                    
                    <!-- è¨­å®šæœ¬åœ°ç’°å¢ƒ -->
                    <div id="local-setup" class="step-content" style="display: none;">
                        <h2>è¨­å®šæœ¬åœ°ç’°å¢ƒ</h2>
                        
                        <div class="step">
                            <h3>æ›´æ–° .env æª”æ¡ˆ</h3>
                            <p>åœ¨æ‚¨çš„å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸­ï¼Œå»ºç«‹æˆ–æ›´æ–° <code>.env</code> æª”æ¡ˆï¼š</p>
                            <div class="code-block">
                                <pre><code># Flask è¨­å®š
SECRET_KEY=your-secret-key-here

# ğŸ”¥ é‡è¦ï¼šä½¿ç”¨ Connection pooling é€£ç·šå­—ä¸²
DATABASE_URL=postgresql://postgres.xxxxxxxxxxxx:your-password@aws-0-ap-southeast-1.pooler.supabase.com:5432/postgres

# Supabase é¡å¤–è³‡è¨Š (å¯é¸ï¼Œæœªä¾†æ“´å±•ç”¨)
SUPABASE_URL=https://xxxxxxxxxxxx.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                        </div>
                        
                        <div class="step">
                            <h3>å–å¾— Supabase API é‡‘é‘° (å¯é¸ï¼Œæœªä¾†æ“´å±•ç”¨)</h3>
                            <p>åœ¨ Supabase Dashboard > Settings > API ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°ä¸¦è¤‡è£½ã€Œanonã€å’Œã€Œservice_roleã€é‡‘é‘°ã€‚</p>
                            <p>é€™äº›é‡‘é‘°åœ¨ä½¿ç”¨ Supabase çš„èº«ä»½é©—è­‰ã€å­˜å„²ç­‰åŠŸèƒ½æ™‚æœƒç”¨åˆ°ã€‚</p>
                        </div>
                        
                        <div class="alert alert-info">
                            <h4>ç’°å¢ƒè®Šæ•¸å®‰å…¨æç¤º</h4>
                            <p>è«‹ç¢ºä¿ <code>.env</code> æª”æ¡ˆå·²åŠ å…¥ <code>.gitignore</code>ï¼Œé¿å…æ•æ„Ÿè³‡è¨Šè¢«æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»çµ±ã€‚åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ï¼Œæ‡‰ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ç®¡ç†ç³»çµ±è€Œéæª”æ¡ˆã€‚</p>
                        </div>
                        
                        <div class="step-navigation">
                            <button class="btn btn-secondary prev-step">ä¸Šä¸€æ­¥</button>
                            <button class="btn btn-primary next-step">ä¸‹ä¸€æ­¥</button>
                        </div>
                    </div>
                    
                    <!-- å»ºç«‹è³‡æ–™åº«çµæ§‹ -->
                    <div id="database-structure" class="step-content" style="display: none;">
                        <h2>å»ºç«‹è³‡æ–™åº«çµæ§‹</h2>
                        
                        <div class="step">
                            <h3>ä½¿ç”¨ Supabase SQL Editor</h3>
                            <p>Supabase æä¾›äº†ä¸€å€‹æ–¹ä¾¿çš„ SQL ç·¨è¼¯å™¨ï¼Œå¯ä»¥ç›´æ¥åœ¨ç€è¦½å™¨ä¸­åŸ·è¡Œ SQL å‘½ä»¤ã€‚</p>
                            <ol>
                                <li>åœ¨ Supabase Dashboard å·¦å´é¸å–®é»æ“Šã€ŒSQL Editorã€</li>
                                <li>é»æ“Šã€Œ+ New queryã€å‰µå»ºæ–°æŸ¥è©¢</li>
                                <li>è¼¸å…¥æ‚¨çš„ SQL å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š</li>
                            </ol>
                            
                            <div class="code-block">
                                <pre><code>-- å‰µå»ºæ‡‰ç”¨è¨­ç½®è¡¨
CREATE TABLE app_settings (
    id SERIAL PRIMARY KEY,
    key VARCHAR(255) NOT NULL UNIQUE,
    value TEXT,
    description TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- å‰µå»ºè¨‚é–±è¡¨
CREATE TABLE subscriptions (
    id SERIAL PRIMARY KEY,
    user_id UUID NOT NULL,
    plan_id VARCHAR(255) NOT NULL,
    status VARCHAR(50) NOT NULL,
    start_date TIMESTAMP WITH TIME ZONE NOT NULL,
    end_date TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                            
                            <p>é»æ“Šã€ŒRunã€åŸ·è¡Œ SQL å‘½ä»¤ã€‚</p>
                        </div>
                        
                        <div class="step">
                            <h3>é©—è­‰è³‡æ–™è¡¨å‰µå»º</h3>
                            <p>åœ¨ Supabase Dashboard å·¦å´é¸å–®é»æ“Šã€ŒTable Editorã€ï¼Œæ‚¨æ‡‰è©²èƒ½çœ‹åˆ°å‰›å‰›å‰µå»ºçš„è³‡æ–™è¡¨ã€‚</p>
                        </div>
                        
                        <div class="step-navigation">
                            <button class="btn btn-secondary prev-step">ä¸Šä¸€æ­¥</button>
                            <button class="btn btn-primary next-step">ä¸‹ä¸€æ­¥</button>
                        </div>
                    </div>
                    
                    <!-- è³‡æ–™é·ç§» -->
                    <div id="data-migration" class="step-content" style="display: none;">
                        <h2>è³‡æ–™é·ç§»</h2>
                        
                        <div class="step">
                            <h3>æº–å‚™é·ç§»è³‡æ–™</h3>
                            <p>è³‡æ–™é·ç§»æ˜¯å°‡ç¾æœ‰è³‡æ–™åº«çµæ§‹å’Œè³‡æ–™ç§»å‹•åˆ°æ–° Supabase å°ˆæ¡ˆçš„éç¨‹ã€‚æ‚¨å¯ä»¥é€é Supabase Studio ç›´æ¥æ“ä½œã€ä½¿ç”¨ Supabase CLI é€²è¡Œé·ç§»ï¼Œæˆ–æ˜¯åˆ©ç”¨åƒ pgAdmin é€™é¡çš„åœ–å½¢åŒ–å·¥å…·ã€‚ä»¥ä¸‹å°‡ä»‹ç´¹å¹¾ç¨®å¸¸ç”¨çš„æ–¹æ³•ï¼š</p>
                            <p>è‹¥æ‚¨åå¥½ä½¿ç”¨ pgAdmin ä¸¦éœ€è¦å¾ç¾æœ‰ PostgreSQL è³‡æ–™åº«åŒ¯å‡ºç‰¹å®šè³‡æ–™è¡¨ï¼Œå¯ä»¥åƒè€ƒæˆ‘å€‘çš„è©³ç´°æ•™å­¸ï¼š<a href="pgadmin.html" class="link-discreet">ä½¿ç”¨ pgAdmin é€²è¡Œè³‡æ–™é·ç§»æ•™å­¸</a>ã€‚</p>
                        </div>
                        
                        <div class="step">
                            <h3>æ–¹æ³• 1ï¼šä½¿ç”¨ SQL åŒ¯å…¥</h3>
                            <p>å¦‚æœæ‚¨æœ‰ç¾æœ‰è³‡æ–™çš„ SQL åŒ¯å‡ºæª”æ¡ˆï¼Œå¯ä»¥ç›´æ¥åœ¨ SQL Editor ä¸­åŸ·è¡Œï¼š</p>
                            <ol>
                                <li>åœ¨ Supabase Dashboard å·¦å´é¸å–®é»æ“Šã€ŒSQL Editorã€</li>
                                <li>é»æ“Šã€Œ+ New queryã€å‰µå»ºæ–°æŸ¥è©¢</li>
                                <li>å°‡æ‚¨çš„ SQL æ’å…¥èªå¥è²¼ä¸Šï¼Œä¾‹å¦‚ï¼š</li>
                            </ol>
                            
                            <div class="code-block">
                                <pre><code>-- æ’å…¥æ‡‰ç”¨è¨­ç½®æ•¸æ“š
INSERT INTO app_settings (key, value, description) VALUES
('site_name', 'My Application', 'ç¶²ç«™åç¨±'),
('theme', 'light', 'ç¶²ç«™ä¸»é¡Œ'),
('maintenance_mode', 'false', 'ç¶­è­·æ¨¡å¼é–‹é—œ');

-- æ’å…¥è¨‚é–±æ•¸æ“š
INSERT INTO subscriptions (user_id, plan_id, status, start_date, end_date) VALUES
('d0e7df7e-ae5a-4a8e-b8df-9ac2c0e4888f', 'basic', 'active', '2025-01-01', '2026-01-01'),
('f3a8f8d7-ae5a-4a8e-b8df-9ac2c0e48123', 'premium', 'active', '2025-02-15', '2026-02-15');</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                        </div>
                        
                        <div class="step">
                            <h3>æ–¹æ³• 2ï¼šä½¿ç”¨ CSV åŒ¯å…¥</h3>
                            <p>Supabase æ”¯æ´é€šé CSV æª”æ¡ˆåŒ¯å…¥è³‡æ–™ï¼š</p>
                            <ol>
                                <li>åœ¨ Supabase Dashboard å·¦å´é¸å–®é»æ“Šã€ŒTable Editorã€</li>
                                <li>é¸æ“‡ç›®æ¨™è³‡æ–™è¡¨</li>
                                <li>é»æ“Šã€ŒImportã€æŒ‰éˆ•</li>
                                <li>é¸æ“‡æ‚¨çš„ CSV æª”æ¡ˆä¸¦æŒ‰ç…§æŒ‡ç¤ºå®ŒæˆåŒ¯å…¥</li>
                            </ol>
                            <p>CSV æª”æ¡ˆçš„ç¬¬ä¸€è¡Œæ‡‰è©²æ˜¯æ¬„ä½åç¨±ï¼Œèˆ‡è³‡æ–™è¡¨çµæ§‹åŒ¹é…ã€‚</p>
                        </div>
                        
                        <div class="step">
                            <h3>æ–¹æ³• 3ï¼šä½¿ç”¨ç¨‹å¼ç¢¼åŒ¯å…¥</h3>
                            <p>æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ç¨‹å¼ç¢¼å°‡è³‡æ–™å¾èˆŠè³‡æ–™åº«é·ç§»åˆ° Supabaseï¼š</p>
                            
                            <div class="code-block">
                                <pre><code>import psycopg2
import os
from dotenv import load_dotenv

# è¼‰å…¥ç’°å¢ƒè®Šæ•¸
load_dotenv()

# é€£æ¥åˆ°èˆŠè³‡æ–™åº«
old_conn = psycopg2.connect(os.getenv('OLD_DATABASE_URL'))
old_cursor = old_conn.cursor()

# é€£æ¥åˆ° Supabase
supabase_conn = psycopg2.connect(os.getenv('DATABASE_URL'))
supabase_cursor = supabase_conn.cursor()

try:
    # å¾èˆŠè³‡æ–™åº«è®€å–è³‡æ–™
    old_cursor.execute("SELECT key, value, description FROM app_settings")
    settings = old_cursor.fetchall()
    
    # æ’å…¥åˆ° Supabase
    for setting in settings:
        supabase_cursor.execute(
            "INSERT INTO app_settings (key, value, description) VALUES (%s, %s, %s)",
            setting
        )
    
    # æäº¤äº‹å‹™
    supabase_conn.commit()
    print(f"æˆåŠŸé·ç§» {len(settings)} æ¢è¨­ç½®è¨˜éŒ„")
    
except Exception as e:
    supabase_conn.rollback()
    print(f"é·ç§»å¤±æ•—: {e}")
    
finally:
    old_cursor.close()
    old_conn.close()
    supabase_cursor.close()
    supabase_conn.close()</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                        </div>
                        
                        <div class="alert alert-warning">
                            <h4>é·ç§»æ³¨æ„äº‹é …</h4>
                            <p>è³‡æ–™é·ç§»å‰è«‹ç¢ºä¿ï¼š</p>
                            <ul>
                                <li>å·²å‚™ä»½æ‰€æœ‰é‡è¦è³‡æ–™</li>
                                <li>ç›®æ¨™è³‡æ–™è¡¨çµæ§‹å·²æ­£ç¢ºå‰µå»º</li>
                                <li>è³‡æ–™é¡å‹å…¼å®¹ï¼ˆç‰¹åˆ¥æ˜¯æ—¥æœŸã€æ™‚é–“å’Œç‰¹æ®Šé¡å‹ï¼‰</li>
                                <li>è€ƒæ…®å¤–éµç´„æŸå’Œè³‡æ–™ä¾è³´é—œä¿‚ï¼ŒæŒ‰æ­£ç¢ºé †åºé·ç§»</li>
                            </ul>
                        </div>
                        
                        <div class="step-navigation">
                            <button class="btn btn-secondary prev-step">ä¸Šä¸€æ­¥</button>
                            <button class="btn btn-primary next-step">ä¸‹ä¸€æ­¥</button>
                        </div>
                    </div>
                    
                    <!-- ä½¿ç”¨ Supabase CLI -->
                    <div id="supabase-cli" class="step-content" style="display: none;">
                        <h2>ä½¿ç”¨ Supabase CLI</h2>
                        
                        <div class="step">
                            <h3>åˆå§‹åŒ–æœ¬åœ° Supabase å°ˆæ¡ˆ</h3>
                            <p>Supabase CLI å¯ä»¥å¹«åŠ©æ‚¨åœ¨æœ¬åœ°é–‹ç™¼å’Œç®¡ç† Supabase å°ˆæ¡ˆï¼Œç‰¹åˆ¥é©åˆåœ˜éšŠå”ä½œå’Œç‰ˆæœ¬æ§åˆ¶ã€‚</p>
                            
                            <div class="code-block">
                                <pre><code># åˆå§‹åŒ– Supabase å°ˆæ¡ˆ
supabase init</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                            
                            <p>é€™å°‡åœ¨æ‚¨çš„å°ˆæ¡ˆç›®éŒ„ä¸­å‰µå»ºä¸€å€‹ <code>supabase</code> è³‡æ–™å¤¾ï¼ŒåŒ…å«é…ç½®æ–‡ä»¶å’Œé·ç§»è…³æœ¬ã€‚</p>
                        </div>
                        
                        <div class="step">
                            <h3>å•Ÿå‹•æœ¬åœ° Supabase é–‹ç™¼ç’°å¢ƒ</h3>
                            <p>æ‚¨å¯ä»¥åœ¨æœ¬åœ°é‹è¡Œ Supabase é€²è¡Œé–‹ç™¼å’Œæ¸¬è©¦ï¼š</p>
                            
                            <div class="code-block">
                                <pre><code># å•Ÿå‹•æœ¬åœ° Supabase
supabase start</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                            
                            <p>é€™å°‡å•Ÿå‹•ä¸€å€‹æœ¬åœ° Docker å®¹å™¨ï¼ŒåŒ…å« PostgreSQL è³‡æ–™åº«ã€Authã€Storage ç­‰æœå‹™ã€‚</p>
                        </div>
                        
                        <div class="step">
                            <h3>å‰µå»ºè³‡æ–™åº«é·ç§»</h3>
                            <p>ä½¿ç”¨ CLI å‰µå»ºå’Œç®¡ç†è³‡æ–™åº«é·ç§»ï¼š</p>
                            
                            <div class="code-block">
                                <pre><code># å‰µå»ºæ–°çš„é·ç§»è…³æœ¬
supabase migration new create_users_table</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                            
                            <p>é€™å°‡åœ¨ <code>supabase/migrations</code> ç›®éŒ„ä¸­å‰µå»ºä¸€å€‹æ–°çš„ SQL æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­ç·¨å¯«è³‡æ–™åº«è®Šæ›´ã€‚</p>
                            
                            <div class="code-block">
                                <pre><code>-- åœ¨é·ç§»æ–‡ä»¶ä¸­ç·¨å¯« SQL
create table public.users (
  id uuid references auth.users not null primary key,
  email text not null unique,
  name text,
  avatar_url text,
  created_at timestamptz default now() not null,
  updated_at timestamptz default now() not null
);

-- å‰µå»º RLS ç­–ç•¥
alter table public.users enable row level security;
create policy "Users can view their own profile" on public.users
  for select using (auth.uid() = id);
create policy "Users can update their own profile" on public.users
  for update using (auth.uid() = id);</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                        </div>
                        
                        <div class="step">
                            <h3>æ‡‰ç”¨é·ç§»</h3>
                            <p>å°‡é·ç§»æ‡‰ç”¨åˆ°æœ¬åœ°æˆ–é ç¨‹è³‡æ–™åº«ï¼š</p>
                            
                            <div class="code-block">
                                <pre><code># æ‡‰ç”¨åˆ°æœ¬åœ°è³‡æ–™åº«
supabase db reset

# æ‡‰ç”¨åˆ°é ç¨‹è³‡æ–™åº« (éœ€è¦å…ˆè¨­ç½® access token)
supabase link --project-ref your-project-ref
supabase db push</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                        </div>
                        
                        <div class="step">
                            <h3>ç”Ÿæˆé¡å‹</h3>
                            <p>ç‚ºæ‚¨çš„è³‡æ–™åº«çµæ§‹ç”Ÿæˆ TypeScript é¡å‹å®šç¾©ï¼ˆå¦‚æœæ‚¨çš„å‰ç«¯ä½¿ç”¨ TypeScriptï¼‰ï¼š</p>
                            
                            <div class="code-block">
                                <pre><code># ç”Ÿæˆé¡å‹å®šç¾©
supabase gen types typescript --local > types/supabase.ts</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                        </div>
                        
                        <div class="alert alert-info">
                            <h4>CLI æœ€ä½³å¯¦è¸</h4>
                            <p>ä½¿ç”¨ Supabase CLI çš„å»ºè­°ï¼š</p>
                            <ul>
                                <li>å°‡é·ç§»æ–‡ä»¶ç´å…¥ç‰ˆæœ¬æ§åˆ¶</li>
                                <li>ä½¿ç”¨æœ‰æ„ç¾©çš„é·ç§»åç¨±</li>
                                <li>åœ¨æœ¬åœ°æ¸¬è©¦é·ç§»å¾Œå†æ‡‰ç”¨åˆ°ç”Ÿç”¢ç’°å¢ƒ</li>
                                <li>ä½¿ç”¨ CI/CD æµç¨‹è‡ªå‹•æ‡‰ç”¨é·ç§»</li>
                            </ul>
                        </div>
                        
                        <div class="step-navigation">
                            <button class="btn btn-secondary prev-step">ä¸Šä¸€æ­¥</button>
                            <button class="btn btn-primary next-step">ä¸‹ä¸€æ­¥</button>
                        </div>
                    </div>
                    
                    <!-- æ¸¬è©¦é€£ç·š -->
                    <div id="test-connection" class="step-content" style="display: none;">
                        <h2>æ¸¬è©¦é€£ç·š</h2>
                        
                        <div class="step">
                            <h3>ä½¿ç”¨ Python æ¸¬è©¦é€£ç·š</h3>
                            <p>ä½¿ç”¨ Python å’Œ psycopg2 æ¸¬è©¦èˆ‡ Supabase çš„é€£ç·šï¼š</p>
                            
                            <div class="code-block">
                                <pre><code>import psycopg2
import os
from dotenv import load_dotenv

# è¼‰å…¥ç’°å¢ƒè®Šæ•¸
load_dotenv()

# å–å¾—é€£ç·šå­—ä¸²
DATABASE_URL = os.getenv("DATABASE_URL")

try:
    # å»ºç«‹é€£ç·š
    conn = psycopg2.connect(DATABASE_URL)
    
    # å»ºç«‹æ¸¸æ¨™
    cursor = conn.cursor()
    
    # åŸ·è¡Œæ¸¬è©¦æŸ¥è©¢
    cursor.execute("SELECT current_database(), current_user, version();")
    
    # ç²å–çµæœ
    result = cursor.fetchone()
    print(f"è³‡æ–™åº«: {result[0]}")
    print(f"ä½¿ç”¨è€…: {result[1]}")
    print(f"ç‰ˆæœ¬: {result[2]}")
    
    # æ¸¬è©¦è®€å–è³‡æ–™è¡¨
    cursor.execute("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public';")
    tables = cursor.fetchall()
    print("\nå¯ç”¨è³‡æ–™è¡¨:")
    for table in tables:
        print(f"- {table[0]}")
    
    print("\né€£ç·šæ¸¬è©¦æˆåŠŸï¼")
    
except Exception as e:
    print(f"é€£ç·šå¤±æ•—: {e}")
    
finally:
    # é—œé–‰é€£ç·š
    if 'conn' in locals() and conn is not None:
        cursor.close()
        conn.close()
        print("é€£ç·šå·²é—œé–‰")</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                        </div>
                        
                        <div class="step">
                            <h3>ä½¿ç”¨ JavaScript æ¸¬è©¦é€£ç·š</h3>
                            <p>ä½¿ç”¨ Node.js å’Œ pg å¥—ä»¶æ¸¬è©¦èˆ‡ Supabase çš„é€£ç·šï¼š</p>
                            
                            <div class="code-block">
                                <pre><code>const { Pool } = require('pg');
require('dotenv').config();

// å–å¾—é€£ç·šå­—ä¸²
const DATABASE_URL = process.env.DATABASE_URL;

// å»ºç«‹é€£ç·šæ± 
const pool = new Pool({
  connectionString: DATABASE_URL,
  ssl: {
    rejectUnauthorized: false // å¦‚æœéœ€è¦ SSL é€£ç·š
  }
});

async function testConnection() {
  let client;
  
  try {
    // å–å¾—é€£ç·š
    client = await pool.connect();
    
    // åŸ·è¡Œæ¸¬è©¦æŸ¥è©¢
    const result = await client.query('SELECT current_database(), current_user, version();');
    console.log(`è³‡æ–™åº«: ${result.rows[0].current_database}`);
    console.log(`ä½¿ç”¨è€…: ${result.rows[0].current_user}`);
    console.log(`ç‰ˆæœ¬: ${result.rows[0].version}`);
    
    // æ¸¬è©¦è®€å–è³‡æ–™è¡¨
    const tablesResult = await client.query(
      "SELECT table_name FROM information_schema.tables WHERE table_schema = 'public';"
    );
    
    console.log('\nå¯ç”¨è³‡æ–™è¡¨:');
    tablesResult.rows.forEach(row => {
      console.log(`- ${row.table_name}`);
    });
    
    console.log('\né€£ç·šæ¸¬è©¦æˆåŠŸï¼');
    
  } catch (err) {
    console.error('é€£ç·šå¤±æ•—:', err);
  } finally {
    // é‡‹æ”¾é€£ç·š
    if (client) {
      client.release();
      console.log('é€£ç·šå·²é‡‹æ”¾');
    }
    
    // é—œé–‰é€£ç·šæ± 
    await pool.end();
  }
}

testConnection();</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                        </div>
                        
                        <div class="step">
                            <h3>ä½¿ç”¨ Supabase JavaScript å®¢æˆ¶ç«¯æ¸¬è©¦</h3>
                            <p>å¦‚æœæ‚¨ä½¿ç”¨ Supabase JavaScript å®¢æˆ¶ç«¯ï¼Œå¯ä»¥é€™æ¨£æ¸¬è©¦ï¼š</p>
                            
                            <div class="code-block">
                                <pre><code>import { createClient } from '@supabase/supabase-js';

// åˆå§‹åŒ– Supabase å®¢æˆ¶ç«¯
const supabaseUrl = 'https://your-project-id.supabase.co';
const supabaseKey = 'your-anon-key';
const supabase = createClient(supabaseUrl, supabaseKey);

async function testSupabaseConnection() {
  try {
    // æ¸¬è©¦æŸ¥è©¢
    const { data, error } = await supabase
      .from('app_settings')
      .select('*')
      .limit(5);
    
    if (error) {
      throw error;
    }
    
    console.log('é€£ç·šæˆåŠŸï¼');
    console.log('æŸ¥è©¢çµæœ:', data);
    
  } catch (error) {
    console.error('é€£ç·šæˆ–æŸ¥è©¢å¤±æ•—:', error.message);
  }
}

testSupabaseConnection();</code></pre>
                                <button class="copy-btn">è¤‡è£½</button>
                            </div>
                        </div>
                        
                        <div class="alert alert-info">
                            <h4>é€£ç·šå•é¡Œæ’æŸ¥</h4>
                            <p>å¦‚æœé€£ç·šæ¸¬è©¦å¤±æ•—ï¼Œè«‹æª¢æŸ¥ï¼š</p>
                            <ul>
                                <li>é€£ç·šå­—ä¸²æ˜¯å¦æ­£ç¢ºï¼ˆç‰¹åˆ¥æ˜¯ä½¿ç”¨ Connection pooling è€Œéç›´æ¥é€£æ¥ï¼‰</li>
                                <li>å¯†ç¢¼æ˜¯å¦æ­£ç¢º</li>
                                <li>IP é™åˆ¶æ˜¯å¦å·²è¨­ç½®ï¼ˆå¦‚æœæœ‰ï¼‰</li>
                                <li>é˜²ç«ç‰†æˆ–ç¶²çµ¡é™åˆ¶</li>
                                <li>SSL è¨­ç½®ï¼ˆæŸäº›ç’°å¢ƒå¯èƒ½éœ€è¦ SSL é€£æ¥ï¼‰</li>
                            </ul>
                        </div>
                        
                        <div class="step-navigation">
                            <button class="btn btn-secondary prev-step">ä¸Šä¸€æ­¥</button>
                            <a href="heroku.html" class="btn btn-primary">å‰å¾€ Heroku éƒ¨ç½²æ•™å­¸</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- é è…³ -->
    <footer class="footer">
        <div class="container footer-content">
            <p>&copy; 2025 Supabase + Heroku éƒ¨ç½²æ•™å­¸ | ç‚ºç¶²é é–‹ç™¼è€…æ‰“é€ </p>
            <ul class="footer-links">
                <li><a href="../index.html" class="footer-link">é¦–é </a></li>
                <li><a href="supabase.html" class="footer-link">Supabase</a></li>
                <li><a href="heroku.html" class="footer-link">Heroku</a></li>
                <li><a href="faq.html" class="footer-link">å¸¸è¦‹å•é¡Œ</a></li>
            </ul>
        </div>
    </footer>

    <script src="../assets/js/main.js"></script>
</body>
</html>
